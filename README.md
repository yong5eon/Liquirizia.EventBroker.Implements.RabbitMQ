# Liquirizia.EventBroker.Implements.RabbitMQ

RabbitMQ 를 사용하는 이벤트 브로커

## Exchange 유형에 따른 라우팅 방식

- Fanout : 단순히 메시지를 모든 큐로 브로드캐스트.
- Topic  : 패턴 매칭을 통해 메시지를 세분화하여 라우팅.
- Header : 라우팅 키를 무시하고 헤더 조건으로 메시지 라우팅.
- Direct : 라우팅 키와 정확히 일치하는 큐로 메시지를 전송.

| **특징**                | **Fanout**                                 | **Topic**                                    | **Header**                                   | **Direct**                                   |
|--------------------------|---------------------------------------------|----------------------------------------------|----------------------------------------------|----------------------------------------------|
| **라우팅 기준**          | 없음 (모든 바인딩된 큐로 메시지 전송)       | Routing key와 Binding pattern 매칭           | 메시지 헤더 값과 Binding 헤더 조건 일치 여부 | Routing key와 Binding key의 **정확한 일치**  |
| **Routing Key 사용 여부**| 사용하지 않음                              | 사용                                          | 사용하지 않음 (헤더에 의존)                  | 사용                                          |
| **Binding 조건**         | 큐와 단순 연결                             | Wildcard (`*`, `#`) 사용 가능                | Key-Value 형식의 헤더 조건                   | 정확히 매칭되는 키 사용                      |
| **와일드카드 지원**      | 지원하지 않음                              | `*`(한 단어), `#`(0개 이상의 단어) 지원      | 지원하지 않음                                | 지원하지 않음                                |
| **메시지 전달 대상**     | 모든 바인딩된 큐                           | Binding pattern과 매칭된 큐만                | 헤더 조건을 만족하는 큐만                    | Binding key와 정확히 일치하는 큐만           |
| **사용 사례**            | - 브로드캐스트<br>- 로그 전달              | - 패턴 기반 메시지 라우팅<br>- 뉴스 필터링    | - 복잡한 조건 기반 필터링<br>- 메타데이터 기반 | - 단순하고 명확한 라우팅<br>- 작업 분배       |
| **복잡도**               | 가장 단순                                  | 중간 (패턴 매칭 로직 추가)                   | 복잡 (헤더 조건 설정 필요)                   | 단순                                          |

## 도커 빌드 및 실행

```shell
> docker image build --file=res/RabbitMQ.4.docker --tag=rabbit-mq:4 .
> docker container run --name=rabbit-mq --detach --publish=5672:5672 --publish=15672:15672 rabbit-mq:4
```

## 샘플

- [Pub/Sub 샘플](sample/Sample.py)

